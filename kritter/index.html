<html>

<head>
  <title>

  </title>
  <link rel="stylesheet" href="video.css">
</head>

<body>
  <div style='width: 90%; max-width: 960px; margin: 0 auto;font-family: "NonBreakingSpaceOverride", "Hoefler Text", "Baskerville Old Face", Garamond, "Times New Roman", serif;font-weight: 400;font-size: 1.3em;line-height: 1.8;text-rendering: optimizeLegibility;'>


    <h4 style="font-weight: 500;color:rgb(170, 43, 43);">Mix</h4>
    <p>find out about the home and aestetic uses of coffee with fatafeet</p>
    <p style="font-size: 18px;color:rgb(170, 43, 43);">Dina Al Majdoub</p>
    <p style="font-size: 18px;color:rgb(100, 100, 100);">Wednesday 26 December 2018</p>
    <p style='width: 100%;line-height: 135%; color: #111;font-family: "NonBreakingSpaceOverride", "Hoefler Text", "Baskerville Old Face", Garamond, "Times New Roman", serif;font-weight: 400;font-size: 1em;line-height: 1.8;text-rendering: optimizeLegibility;'>
      <div style="background-image: url(coffee-splash.jpg);width: 100%;height: 300px; background-position:center 71%;background-size: cover;">

      </div>
      <!--             <img src="coffee-splash.jpg" style="width: 100%;">
  --> Don’t let complicated recipes stand in
      the way of you and carbs. These easy pasta dishes will make dinner stress-free, and are delish enough that you’ll
      be happy to have leftovers. From classics like chicken alfredo and Crock-Pot spaghetti to out-of-the-box eats
      like ravioli lasagna, there’s something for everyone here.
      <br><br>
      Don’t let complicated recipes stand in the way of you and carbs. These easy pasta dishes will make dinner
      stress-free, and are delish enough that you’ll be happy to have leftovers. From classics like chicken alfredo and
      Crock-Pot spaghetti to out-of-the-box eats like ravioli lasagna, there’s something for everyone here.
      <br><br>
      Don’t let complicated recipes stand in the way of you and carbs. These easy pasta dishes will make dinner
      stress-free, and are delish enough that you’ll be happy to have leftovers. From classics like chicken alfredo and
      Crock-Pot spaghetti to out-of-the-box eats like ravioli lasagna, there’s something for everyone here.
      <br><br>
      Don’t let complicated recipes stand in the way of you and carbs. These easy pasta dishes will make dinner
      stress-free, and are delish enough that you’ll be happy to have leftovers. From classics like chicken alfredo and
      Crock-Pot spaghetti to out-of-the-box eats like ravioli lasagna, there’s something for everyone here.
      <br><br>
    </p>
  </div>
  <!--<div class="simplifai-info">-->

    <!--<h3>-->
      <!--Simplif<span>ai</span> Labs-->
      <!--<p>AI powered Ads</p>-->
    <!--</h3>-->

    <!--<h4>-->

      <!--Simplifai Labs is an artificial intelligence company, we are creating a new shopping experience in the Arab world-->
      <!--by providing an innovative solution for eCommerce and brands by turning any images into a seamless online-->
      <!--shopping experience using our cutting-edge Artificial Intelligence enabled Visual Discovery Technology.-->
      <!--<br /><br />-->

      <!--We understand the images and videos like human does to recognize visual content which enables us to provide you a-->
      <!--delightful shopping experience. To know more about our solutions for publishers and advertisers, please write to-->
      <!--us at <span>info@simplifailabs.com</span>-->

    <!--</h4>-->

    <!--<div class="simplifai-info-close-button" onclick="showInfo()">-->
      <!--x-->
    <!--</div>-->

  <!--</div>-->

  <div class="simplifai-banner">
    <!-- Hide banner label START -->
    <div class="expand-button" style="background-image:url(./show-arrow.svg);" onclick="closeBanner()"></div>
    <!-- Hide banner label START -->
    <div class="company-icon" onclick="showInfo()">
      ai
    </div>

    <div class="banner-close-button" onclick="closeBanner()">
      x
    </div>

    <!-- Banner BG START -->
    <!-- BG Size - Width:100% // Height: 70px; -->
    <div class="background"></div>
    <!-- Banner BG END -->

    <div class="video-wrapper">
      <div class="video-player" style="background: url()">

        <!-- Video Player START -->
        <!-- Place content here -->
        <!-- If You want to place image, place image - place url to video-player style attribute -->
        <!-- Section sizes: Mobile - 120px x 100px // Desktop - 150px x 100px -->

        <div class="video-label">

        </div>
        <video onClick="showVideo()" id="player-placeholder">
          <!--                 <source src="big_buck_bunny.mp4" type="video/mp4">
                <source src="big_buck_bunny.ogg" type="video/ogg"> -->
          Your browser does not support HTML5 video.
        </video>

        <!-- Video Player END -->
      </div>
      <div class="video-content">
        <div class="video-content-wrapper" style="background: url()">

          <!-- Video Section content START -->
          <!-- Place content here -->
          <!-- If You want to place image, place image - place url to video-content-wrapper style attribute -->
          <!-- Section sizes: Mobile - auto x 70px // Desktop - auto x 70px -->


          <div style="position:absolute;
                  left: 0;
                  top: 50%;
                  width: 100%;
                  transform: translateY(-50%)">
            <h3>

            </h3>
            <p>

            </p>
          </div>

          <!-- Video Section content END -->
        </div>
      </div>
      <div class="video-content-end" style="background: url()">
        <!-- End section Start -->
        <!-- If You want to place image, place image - place url to video-content-end style attribute -->
        <!-- Section sizes: Mobile - 80px x 100px // Desktop - 150px x 100px -->

        <!-- <button>
                Watch now
              </button> -->

        <!-- End section End -->
      </div>
    </div>
  </div>

  <!-- Video modal START -->
  <div class="video-modal">
    <div class="close-button" onClick="showVideo()"></div>
    <div class="background" onClick="showVideo(); pauseVideo()">

    </div>
    <div class="video-container">
      <video controls class="video" id="player">
        <!--               <source src="big_buck_bunny.mp4" type="video/mp4">
              <source src="big_buck_bunny.ogg" type="video/ogg"> -->
        Your browser does not support HTML5 video.
      </video>
    </div>
  </div>
  <!-- Video modal END -->

  <script>
    function closeBanner() {
      var elem = document.querySelector('.simplifai-banner');
      elem.classList.toggle('hide')
    }

    function showInfo() {
      var elem = document.querySelector('.simplifai-info');
      elem.classList.toggle('info-show')
    }

    function pauseVideo() {
      document.querySelector('.video').pause();
    }

    function showVideo() {
      var elem = document.querySelector('.video-modal');
      elem.classList.toggle('show')
      let videoPlayer = document.getElementById('player')

      videoPlayer.play()
    }
    var timerVar = 0;
    var banner = document.querySelector('.simplifai-banner');
    var timerId = setInterval(function () {
      if (timerVar < 7) {
        timerVar++
      } else {
        banner.classList.toggle('hide')
        clearInterval(timerId);
      }
    }, 1000);



  </script>
  <script src="vast-client.js"></script>
  <script>
    let data = []
    console.log()
    const vastURL = 'videoBanner.json'
    const skipButton = document.getElementById('skipbtn')
    const logger = document.getElementById('log')
    const vastClient = new VAST.VASTClient()
    const vastParser = new VAST.VASTParser()

    let skippable = false;

    window.onload = function () {
      var xmlHttp = new XMLHttpRequest();
      xmlHttp.open("GET", vastURL, false); // false for synchronous request
      xmlHttp.send(null);
      data = JSON.parse(xmlHttp.responseText)

      function StringToXML(oString) {
        //code for IE
        if (window.ActiveXObject) {
          var oXML = new ActiveXObject("Microsoft.XMLDOM");
          oXML.loadXML(oString);
          return oXML;
        }
        // code for Chrome, Safari, Firefox, Opera, etc. 
        else {
          return (new DOMParser()).parseFromString(oString, "text/xml");
        }
      }

      let parsedVAST = '';

      vastParser.parseVAST(StringToXML(data.assets[3].video.vasttag))
        .then(res => {
          console.log(res.ads[0].creatives[0].mediaFiles)
          parsedVAST = res
          let videoPlayer = document.getElementById('player')
          let videoPlayer2 = document.getElementById('player-placeholder')
          let background = document.querySelector('.background')
          background.style.cssText = "background-image: url(" + data.assets[2].img.url + ");"
          // Set Video player src
          console.log(res.ads[0].creatives[0].mediaFiles[0].fileURL)
          videoPlayer.src = res.ads[0].creatives[0].mediaFiles[0].fileURL
          videoPlayer2.src = res.ads[0].creatives[0].mediaFiles[0].fileURL


          const { ad, creative, mediaFile } = getSupportedCreative(parsedVAST)

          // Init the VAST tracker with selected ad and creative
          const tracker = new VASTTracker(ad, creative)
          // Set VAST tracking
          setVastTracking(tracker)




        })
        .catch(err => {
          // Deal with the error
        });







    }

    function getSupportedCreative(ads) {
      // Here I just return the 1st ad/creative/mediaFile but you might want to loop
      // through ads/creatives until you find a playable one
      console.log(ads)
      return {
        ad: ads[0],
        creative: ads[0].creatives[0],
        mediaFile: ads.creatives.mediaFiles
      }
    }

    function setVastTracking(tracker) {
      // Here we listen to some videoTag event and call teh appropriate tracker methods. 

      // On video canPlay, track impression
      videoPlayer.addEventListener('canplay', function () {
        tracker.load();
      });

      //Set clickthrough on video
      videoPlayer.addEventListener('click', function () {
        // Do VAST tracking for clickThrough
        tracker.click()
      });

      // On video timeUpdate
      videoPlayer.addEventListener('timeupdate', function (e) {

        // Update progress for quartiles tracking
        tracker.setProgress(e.target.currentTime);

        // Is Video skippable?
        if (tracker.skipable && !skippable) {
          skippable = true;

          // Display skip button
          skipButton.style.display = 'block';

          // Add listener for click eve
          skipButton.addEventListener('click', function () {
            // Do VAST tracking for skip
            tracker.skip()

            // Hide skip button
            skipButton.style.display = 'none';

            // Play main video
            playContentVideo()
          })
        }
      });

      // On video ended
      videoPlayer.addEventListener('ended', function () {
        // Do VAST tracking for video completed
        tracker.complete()

        // Hide skip button
        skipButton.style.display = 'none';

        // Play main video
        playContentVideo()
      });

      // We want to know when the VAST events tracking has been done
      // We bind some listener to the VAST tracker. 
      tracker.on('creativeView', function () {
        log('impression/creative URLs have been called')
      });

      tracker.on('firstQuartile', function () {
        log('firstQuartile tracking URLs have been called')
      });

      tracker.on('midpoint', function () {
        log('midpoint tracking URLs have been called')
      });

      tracker.on('thirdQuartile', function () {
        log('thirdQuartile tracking URLs have been called')
      });

      tracker.on('skip', function () {
        log('skip tracking URLs have been called')
      });

      tracker.on('complete', function () {
        log('complete tracking URLs have been called')
      });

      tracker.on('clickthrough', function (url) {
        log('clickthrough tracking URLs have been called')
        // Open clicktrough URL into a new window
        window.open(url)
      });

      // And many other has to be set, see https://github.com/dailymotion/vast-client-js/blob/master/docs/api.md#setprogress-progress- 
    }

    function log(txt) {
      const node = document.createElement("li")
      const txtnode = document.createTextNode(txt)
      node.appendChild(txtnode)
      logger.appendChild(node);
    }

    // Play Main video
    function playContentVideo() {
      videoPlayer.src = 'http://stage-01.dailymotion.com/files/static/playerv5/video/ad_laplagne_360.mp4'
      videoPlayer.play()
    }

  </script>
</body>

</html>